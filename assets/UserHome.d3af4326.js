import{O as v,L as g,N as y,P as V,al as b,V as o,d as s,R as i,Z as _,ap as Q,Y as c,W as m,an as d,ar as x,b5 as q,as as w}from"./index.61b5a61b.js";import{Q as U}from"./QSpace.c292eb5c.js";import{Q as z,a as u}from"./QForm.f66cfea4.js";import{Q as C}from"./QCardActions.53ede0a6.js";import{Q as S}from"./QDialog.fd0df5be.js";import{v as f}from"./index.598c9681.js";import"./use-key-composition.a0ab30d2.js";import"./use-prevent-scroll.ebe5d078.js";import"./_commonjsHelpers.b8add541.js";const B={id:"userHome"},k={class:"container"},D=o("div",{class:"row title_area"},[o("div",{class:"bigTitle"}," \u6703\u54E1\u8CC7\u6599 ")],-1),N={class:"user_info"},P={class:"row info_area"},$={class:"col-12"},A={class:"top_area"},E={class:"user_name"},H={class:"user_account"},T={class:"bottom_area"},W={class:"user_email"},F={class:"user_phone"},I={class:"column avatar_area"},L={class:"user_avatar"},M=["src"],O=o("div",{class:"text-h6"}," \u7DE8\u8F2F\u8CC7\u6599 ",-1),oe={__name:"UserHome",setup(R){const n=v(),p=g(),r={email(t){return f.isEmail(t)||"\u683C\u5F0F\u932F\u8AA4"},phone(t){return f.isMobilePhone(t,"zh-TW")||"\u683C\u5F0F\u932F\u8AA4"},required(t){return!!t||"\u6B04\u4F4D\u5FC5\u586B"},length(t){return t.length>=4&&t.length<=12||"\u9577\u5EA6\u5FC5\u9808\u70BA 4 ~ 12 \u500B\u5B57"}},e=y({name:n.name,account:n.account,email:n.email,phone:n.phone,dialog:!1,loading:!1}),h=async()=>{var t,l;try{e.loading=!0;const{data:a}=await q.patch("/users/"+n._id,e);n.name=a.result.name,n.account=a.result.account,n.email=a.result.email,n.phone=a.result.phone,p.notify({position:"top",message:"\u7DE8\u8F2F\u6210\u529F",color:"secondary",avatar:`https://source.boringavatars.com/beam/256/${n.account.value}?colors=#ffad08,#edd75a,#73b06f,#0c8f8f,#405059`})}catch(a){console.log(a),p.notify({position:"top",message:((l=(t=a==null?void 0:a.response)==null?void 0:t.data)==null?void 0:l.message)||"\u767C\u751F\u932F\u8AA4",color:"negative"})}e.dialog=!1,e.loading=!1};return(t,l)=>(V(),b("div",B,[o("div",k,[D,o("div",N,[o("div",P,[o("div",$,[s(_,null,{default:i(()=>[o("div",A,[s(m,null,{default:i(()=>[o("div",E,d(e.name),1),o("div",H,d(e.account),1)]),_:1})]),o("div",T,[s(m,null,{default:i(()=>[o("div",W," \u4FE1\u7BB1\uFF1A"+d(e.email),1),o("div",F," \u96FB\u8A71\uFF1A"+d(e.phone),1)]),_:1})])]),_:1})])]),o("div",I,[o("div",L,[o("img",{src:Q(n).avatar},null,8,M)]),s(c,{icon:"edit",label:"\u7DE8\u8F2F\u8CC7\u6599",color:"secondary",onClick:l[0]||(l[0]=a=>e.dialog=!0)}),s(S,{modelValue:e.dialog,"onUpdate:modelValue":l[5]||(l[5]=a=>e.dialog=a),persistent:""},{default:i(()=>[s(_,{class:"q-px-md"},{default:i(()=>[s(m,{class:"row items-center q-pb-md"},{default:i(()=>[O,s(U),x(s(c,{icon:"close",flat:"",round:"",dense:""},null,512),[[w]])]),_:1}),s(z,{class:"q-gutter-md",style:{width:"500px"},onSubmit:h},{default:i(()=>[s(u,{modelValue:e.name,"onUpdate:modelValue":l[1]||(l[1]=a=>e.name=a),type:"text",outlined:"",label:"\u8ACB\u8F38\u5165\u59D3\u540D","lazy-rules":"",rules:[r.required]},null,8,["modelValue","rules"]),s(u,{modelValue:e.account,"onUpdate:modelValue":l[2]||(l[2]=a=>e.account=a),type:"text",outlined:"",label:"\u8ACB\u8F38\u5165\u5E33\u865F","lazy-rules":"",rules:[r.required,r.length]},null,8,["modelValue","rules"]),s(u,{modelValue:e.email,"onUpdate:modelValue":l[3]||(l[3]=a=>e.email=a),type:"text",outlined:"",label:"\u8ACB\u8F38\u5165\u4FE1\u7BB1","lazy-rules":"",rules:[r.required,r.email]},null,8,["modelValue","rules"]),s(u,{modelValue:e.phone,"onUpdate:modelValue":l[4]||(l[4]=a=>e.phone=a),type:"text",outlined:"",label:"\u8ACB\u8F38\u5165\u96FB\u8A71","lazy-rules":"",rules:[r.required,r.phone]},null,8,["modelValue","rules"]),o("div",null,[s(C,{align:"center"},{default:i(()=>[s(c,{label:"\u78BA\u8A8D",type:"submit",color:"primary",loading:e.loading,size:"md"},null,8,["loading"])]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])])])])]))}};export{oe as default};
