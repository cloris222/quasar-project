import{b2 as z,J as N,M as F,r as w,L as k,W as I,N as c,ai as d,R as t,d as e,P as l,F as g,al as f,a5 as P,b3 as V,O as R,aj as v,ak as m,V as h,ao as U,ap as E}from"./index.9b0ce75b.js";import{Q as L,a as y}from"./QBreadcrumbs.e89e9b30.js";import{Q as M}from"./QChip.e49f4edf.js";import{a as C,Q as i}from"./QCard.386771b8.js";import{Q as T}from"./QSpace.c9cee8f6.js";import{Q as j,a as J}from"./QForm.1ea5f3fa.js";import{Q as O}from"./QDialog.8fd93ae5.js";import{u as W}from"./use-quasar.c64d79f7.js";import"./use-prevent-scroll.97bd2bc4.js";const A={id:"productView"},G={class:"container"},H={class:"row q-mt-lg q-my-lg"},K={class:"col-12"},X={class:"gameInfo"},Y={class:"row img_area bg-primary"},Z={class:"col-8 q-mx-auto q-pt-lg"},ee={class:"slideshow"},se=["src"],ae={class:"thumbnails"},te=["src","onClick"],le={class:"row info_area"},oe={class:"q-pt-lg"},re={class:"info_name"},ie={class:"info_rules"},ne={class:"info_priceandbtn"},ce={class:"info_price"},ue={class:"info_btn"},de={class:"col-10"},me=t("div",{class:"text-h6"}," \u8CFC\u7269\u8ECA ",-1),ke={__name:"ProductView",setup(_e){const b=z(),x=N(),B=W(),Q=F(),p=w(0),S=s=>{p.value=s},_=w(!1),o=k({p_id:"",quantity:0,price:0,name:""}),D=s=>{_.value=!0,o.name=s.name,o.p_id=s._id,o.price=s.price,o.quantity=0,console.log(_.value)},q={required(s){return!!s||"\u6B04\u4F4D\u5FC5\u586B"},number(s){return s>0||"\u6578\u91CF\u932F\u8AA4"}},$=async()=>{o.loading=!0,await Q.editCart({_id:o.p_id,quantity:o.quantity,price:o.price,message:"\u52A0\u5165\u8CFC\u7269\u8ECA\u6210\u529F"}),_.value=!1},a=k({_id:"",name:"",images:[],category:[],gamer:0,age:0,rules:"",price:0,sell:!0,loading:!1});return(async()=>{try{console.log(b);const{data:s}=await I.get("/products/"+b.params.id);a._id=s.result._id,a.name=s.result.name,a.images=s.result.images,a.category=s.result.category,a.gamer=s.result.gamer,a.age=s.result.age,a.rules=s.result.rules,a.price=s.result.price,a.sell=s.result.sell,document.title="\u684C\u4E0B\u5427 | "+a.name}catch{B.notify({position:"top",message:"\u53D6\u5F97\u5546\u54C1\u5931\u6557",color:"negative",avatar:`https://source.boringavatars.com/beam/256/${Q.account.value}?colors=#ffad08,#edd75a,#73b06f,#0c8f8f,#405059`}),x.go(-1)}})(),(s,u)=>(c(),d("div",A,[t("div",G,[t("div",H,[t("div",K,[e(L,{class:"text-primary","active-color":"grey"},{separator:l(()=>[e(P,{size:"1.5em",name:"chevron_right",color:"primary"})]),default:l(()=>[e(y,{label:"\u9996\u9801",icon:"home",to:"/"}),e(y,{label:"\u4E8C\u624B\u5C08\u5340",icon:"mdi-bookshelf",to:"/shoppingMall"}),e(y,{label:a.name,icon:"mdi-cards"},null,8,["label"])]),_:1})])]),t("div",X,[t("div",Y,[t("div",Z,[t("div",ee,[(c(!0),d(g,null,f(a.images,(r,n)=>(c(),d("div",{key:n,class:V(["slide",{active:p.value===n}])},[t("img",{src:r},null,8,se)],2))),128))]),t("div",ae,[(c(!0),d(g,null,f(a.images,(r,n)=>(c(),d("img",{key:n,src:r,class:V({active:p.value===n}),onClick:pe=>S(n)},null,10,te))),128))])])]),t("div",le,[e(C,null,{default:l(()=>[e(i,null,{default:l(()=>[t("div",oe,[(c(!0),d(g,null,f(a.category,(r,n)=>(c(),R(M,{key:n,color:"primary",class:"text-white"},{default:l(()=>[v(m(r),1)]),_:2},1024))),128))])]),_:1}),e(i,null,{default:l(()=>[e(i,null,{default:l(()=>[t("div",re,m(a.name),1)]),_:1}),e(i,null,{default:l(()=>[t("div",ie,m(a.rules),1)]),_:1}),e(i,null,{default:l(()=>[t("div",ne,[t("div",ce," $"+m(a.price),1),t("div",ue,[e(h,{size:"lg",push:"",round:"",color:"secondary",icon:"mdi-cart-outline",onClick:u[0]||(u[0]=r=>D(a))})])])]),_:1})]),_:1})]),_:1}),t("div",de,[e(O,{modelValue:_.value,"onUpdate:modelValue":u[2]||(u[2]=r=>_.value=r),persistent:""},{default:l(()=>[e(C,{class:"q-px-md"},{default:l(()=>[e(i,{class:"row items-center q-pb-md"},{default:l(()=>[me,e(T),U(e(h,{icon:"close",flat:"",round:"",dense:""},null,512),[[E]])]),_:1}),e(j,{class:"q-gutter-md",style:{width:"500px"},onSubmit:$},{default:l(()=>[e(i,null,{default:l(()=>[v(" \u54C1\u540D:"+m(o.name),1)]),_:1}),e(i,null,{default:l(()=>[v(" \u50F9\u9322:"+m(o.price),1)]),_:1}),e(i,null,{default:l(()=>[e(J,{modelValue:o.quantity,"onUpdate:modelValue":u[1]||(u[1]=r=>o.quantity=r),outlined:"",type:"number",label:"\u8ACB\u9078\u64C7\u5546\u54C1\u6578\u91CF *","lazy-rules":"",rules:[q.required,q.number]},null,8,["modelValue","rules"])]),_:1}),e(i,null,{default:l(()=>[e(h,{label:"\u78BA\u8A8D",type:"submit",color:"primary",loading:o.loading},null,8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])])])]))}};export{ke as default};
