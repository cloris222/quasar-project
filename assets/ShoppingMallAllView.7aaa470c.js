import{r as g,O as u,ak as h,d as e,Q as s,U as a,X as d,V as c,al as r,am as v,a8 as V,F as w,an as B,P as A,Y as P,N as L,J as X,M as $,c as I,Z,ao as G,ap as H,aq as K,ar as W}from"./index.cc7185c5.js";import{Q as ee,a as z}from"./QBreadcrumbs.808ab3f7.js";import{_ as j,Q as ae,a as Q,b as te}from"./lodash.3af96b2c.js";import{Q as le}from"./QSelect.754410fb.js";import{Q as E}from"./QChip.c4dd59f0.js";import{Q as oe}from"./QSpace.631a739a.js";import{Q as se,a as ie}from"./QForm.b2504361.js";import{Q as re}from"./QDialog.de3fc9f4.js";import"./option-sizes.b544c90e.js";import"./use-key-composition.3a3afe41.js";import"./TouchPan.c03103fa.js";import"./touch.70a9dd44.js";import"./format.3e32b8d9.js";import"./_commonjsHelpers.b8add541.js";import"./use-prevent-scroll.ab97b618.js";const ne={id:"ProductCard"},ce={class:"cardImage"},de=["src"],ue={class:"row text-h6"},me={class:"gamer"},pe={class:"gamer_icon"},_e={class:"gamer_number"},ge={__name:"ProductCard",props:{_id:{type:String,default:""},name:{type:String,default:""},images:{type:Array,default(){return[]}},category:{type:Array,default(){return[]}},gamer:{type:String,default:""},age:{type:Number,default:0},rules:{type:String,default:""},price:{type:Number,default:0},sell:{type:Boolean,default:!1}},emits:["open-cart-dialog"],setup(m,{emit:x}){const C=g(!0),S=()=>{x("open-cart-dialog",C.value)};return(U,f)=>(u(),h("div",ne,[e(P,{class:"productCard"},{default:s(()=>[a("div",ce,[a("img",{src:m.images[0]},null,8,de),e(d,{"icon-right":"mdi-arrow-right",label:"\u4E86\u89E3\u8A73\u60C5",color:"secondary",class:"detailBtn",to:"/products/"+m._id},null,8,["to"])]),e(c,null,{default:s(()=>[a("div",ue,[r(v(m.name)+" ",1),a("div",me,[a("div",pe,[e(V,{name:"diversity_3",color:"primary",size:"sm",class:"q-mr-sm"})]),a("div",_e,v(m.gamer),1)])])]),_:1}),e(c,{class:"q-pt-none"},{default:s(()=>[(u(!0),h(w,null,B(m.category,(k,p)=>(u(),A(E,{key:p,color:"primary","text-color":"white"},{default:s(()=>[r(v(k),1)]),_:2},1024))),128))]),_:1}),e(c,{class:"q-pt-none price_area"},{default:s(()=>[r(" $"+v(m.price),1)]),_:1}),e(c,{class:"q-pt-none btn_area flex justify-center no-wrap"},{default:s(()=>[e(d,{icon:"mdi-cart-outline",flat:"",class:"icon_cart",onClick:S})]),_:1})]),_:1})]))}},ve={id:"shoppingMall"},fe={class:"container"},ye={class:"row q-mt-lg"},he={class:"col-3"},be={class:"toolSection"},Ve={class:"row justify-center q-mt-lg q-mx-auto"},ke={class:"col-1 title_area"},qe={class:"col-5 q-mb-lg"},Qe={class:"row justify-center q-mx-auto"},we={class:"col-1 title_area"},xe={class:"col-2 q-mb-lg"},Ce={class:"col-3"},Se={class:"row justify-center q-mx-auto"},Ue={class:"col-1 title_area"},$e={class:"col-12 col-lg-5 q-mb-lg"},Be={class:"btn_area"},Ne={class:"row q-mx-auto justify-center"},De=a("div",{class:"text-h6"}," \u8CFC\u7269\u8ECA ",-1),Ie={id:"footer"},ze={class:"container"},je=a("div",{class:"row"},[a("div",{class:"col-12"},[a("div",{class:"info_area"},[r(" \u5730\u5740 : \u65B0\u5317\u5E02\u6CF0\u5C71\u5340\u8CB4\u5B50\u91CC\u81F4\u9060\u65B0\u675155\u4E4B1\u865F "),a("br"),r(" \u96FB\u8A71 : 02-23941157 "),a("br"),r(" E-mail : admin@gmail.com "),a("br"),r(" \u71DF\u696D\u6642\u9593 : \u65E9\u4E0A10:00\u81F3\u665A\u4E0A23:00 \u6BCF\u9031\u4E09\u516C\u4F11 ")])])],-1),Ae={class:"row"},Pe={class:"col-12"},Ee={class:"btn_area"},Fe=a("div",{class:"col-12"},[a("div",{class:"copyright"}," Copyright \xA9 2023 Yung Chien Yang. All rights reserved. ")],-1),ta={__name:"ShoppingMallAllView",setup(m){const x=L(),{editCart:C}=x,S=X(),U=$([]),f=g([]),k=g(!0),p=g(!1),F=["\u6D3E\u5C0D\u904A\u6232","\u7B56\u7565\u904A\u6232","\u9663\u71DF\u904A\u6232","\u89AA\u5B50\u904A\u6232","\u7D19\u724C\u904A\u6232","\u5176\u4ED6\u904A\u6232","\u66A2\u92B7\u904A\u6232","\u6700\u65B0\u4E0A\u67B6","\u64BF\u4FBF\u5B9C","\u516B\u6210\u65B0","\u8FD1\u5168\u65B0"],y=g("less"),b=g("0"),i=$({p_id:"",quantity:0,price:0,name:"",loading:!1}),M=l=>{p.value=!0,i.name=l.name,i.p_id=l._id,i.price=l.price,i.quantity=0,console.log(p.value)},O=()=>{f.value=n.category.map(l=>l)},R=l=>{f.value.splice(l,1),n.category.splice(l,1)},N={required(l){return!!l||"\u6B04\u4F4D\u5FC5\u586B"},number(l){return l>0||"\u6578\u91CF\u932F\u8AA4"}},Y=async()=>{i.loading=!0,await C({_id:i.p_id,quantity:i.quantity,price:i.price,message:"\u52A0\u5165\u8CFC\u7269\u8ECA\u6210\u529F"}),p.value=!1},n=$({gamer:{min:1,max:5},category:["\u66A2\u92B7\u904A\u6232"]}),T=I(()=>U.filter(l=>y.value==="less"?l.gamer.split("~").map(Number)[0]>=parseInt(n.gamer.min)&&l.gamer.split("~").map(Number)[1]<=parseInt(n.gamer.max)&&parseInt(j.intersection(l.category,n.category).length)!==0:l.gamer.split("~").map(Number)[1]>10&&parseInt(j.intersection(l.category,n.category).length)!==0)),D=g(T),J=I(()=>b.value==="0"?D.value.slice().sort((l,t)=>l.price-t.price):D.value.slice().sort((l,t)=>t.price-l.price));return(async()=>{var l,t;try{const{data:o}=await Z.get("/products");U.push(...o.result)}catch(o){S.notify({position:"top",message:((t=(l=o==null?void 0:o.response)==null?void 0:l.data)==null?void 0:t.message)||"\u767C\u751F\u932F\u8AA4",color:"negative"})}})(),(l,t)=>(u(),h(w,null,[a("div",ve,[a("div",fe,[a("div",ye,[a("div",he,[e(ee,{class:"text-primary","active-color":"grey"},{separator:s(()=>[e(V,{size:"1.5em",name:"chevron_right",color:"primary"})]),default:s(()=>[e(z,{label:"\u9996\u9801",icon:"home",to:"/"}),e(z,{label:"\u4E8C\u624B\u5C08\u5340",icon:"mdi-bookshelf"})]),_:1})])]),e(ae,{modelValue:k.value,"onUpdate:modelValue":t[7]||(t[7]=o=>k.value=o),icon:"mdi-filter-variant",label:"\u7BE9\u9078\u689D\u4EF6"},{default:s(()=>[a("div",be,[a("div",Ve,[a("div",ke,[e(V,{name:"diversity_3",size:"sm"}),r(" \u4EBA\u6578 ")]),a("div",qe,[e(Q,{modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=o=>y.value=o),"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"less",label:"10\u4EBA\u4EE5\u4E0B"},null,8,["modelValue"]),e(Q,{modelValue:y.value,"onUpdate:modelValue":t[1]||(t[1]=o=>y.value=o),"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"more",label:"10\u4EBA\u4EE5\u4E0A"},null,8,["modelValue"]),e(te,{modelValue:n.gamer,"onUpdate:modelValue":t[2]||(t[2]=o=>n.gamer=o),disable:y.value==="more",snap:"",markers:"","marker-labels":"",min:1,max:10},null,8,["modelValue","disable"])])]),a("div",Qe,[a("div",we,[e(V,{name:"sell",size:"sm"}),r(" \u6A19\u7C64 ")]),a("div",xe,[e(le,{modelValue:n.category,"onUpdate:modelValue":t[3]||(t[3]=o=>n.category=o),filled:"",multiple:"",options:F,label:"\u65B0\u589E\u6A19\u7C64",style:{width:"250px"},"bottom-slots":""},{append:s(()=>[e(d,{round:"",dense:"",flat:"",icon:"add",onClick:O})]),_:1},8,["modelValue"])]),a("div",Ce,[(u(!0),h(w,null,B(f.value,(o,q)=>(u(),A(E,{key:q,modelValue:f.value,"onUpdate:modelValue":t[4]||(t[4]=_=>f.value=_),color:"primary","text-color":"white",clickable:"",icon:"mdi-close-circle","icon-color":"white",onClick:_=>R(q)},{default:s(()=>[r(v(o),1)]),_:2},1032,["modelValue","onClick"]))),128))])]),a("div",Se,[a("div",Ue,[e(V,{name:"monetization_on",size:"sm"}),r(" \u50F9\u683C ")]),a("div",$e,[a("div",Be,[e(Q,{modelValue:b.value,"onUpdate:modelValue":t[5]||(t[5]=o=>b.value=o),"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"0",label:"\u7531\u4F4E\u5230\u9AD8"},null,8,["modelValue"]),e(Q,{modelValue:b.value,"onUpdate:modelValue":t[6]||(t[6]=o=>b.value=o),"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"1",label:"\u7531\u9AD8\u5230\u4F4E"},null,8,["modelValue"])])])])])]),_:1},8,["modelValue"]),a("div",Ne,[(u(!0),h(w,null,B(G(J),(o,q)=>(u(),h("div",{key:q,class:"col-6 col-lg-4 q-mb-lg"},[e(ge,H(o,{onOpenCartDialog:_=>M(o)}),null,16,["onOpenCartDialog"]),e(re,{modelValue:p.value,"onUpdate:modelValue":t[9]||(t[9]=_=>p.value=_),persistent:""},{default:s(()=>[e(P,{class:"q-px-md"},{default:s(()=>[e(c,{class:"row items-center q-pb-md"},{default:s(()=>[De,e(oe),K(e(d,{icon:"close",flat:"",round:"",dense:""},null,512),[[W]])]),_:1}),e(se,{class:"q-gutter-md",style:{width:"500px"},onSubmit:Y},{default:s(()=>[e(c,null,{default:s(()=>[r(" \u54C1\u540D:"+v(i.name),1)]),_:1}),e(c,null,{default:s(()=>[r(" \u50F9\u9322:"+v(i.price),1)]),_:1}),e(c,null,{default:s(()=>[e(ie,{modelValue:i.quantity,"onUpdate:modelValue":t[8]||(t[8]=_=>i.quantity=_),outlined:"",type:"number",label:"\u8ACB\u9078\u64C7\u5546\u54C1\u6578\u91CF *","lazy-rules":"",rules:[N.required,N.number]},null,8,["modelValue","rules"])]),_:1}),e(c,null,{default:s(()=>[e(d,{label:"\u78BA\u8A8D",type:"submit",color:"primary",loading:i.loading},null,8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))),128))])])]),a("div",Ie,[a("div",ze,[je,a("div",Ae,[a("div",Pe,[a("div",Ee,[e(d,{icon:"mdi-facebook",outline:"",rounded:"",color:"secondary",class:"q-mr-lg"}),e(d,{icon:"mdi-instagram",outline:"",rounded:"",color:"secondary",class:"q-mr-lg"}),e(d,{icon:"mdi-twitter",outline:"",rounded:"",color:"secondary"})])]),Fe])])])],64))}};export{ta as default};
