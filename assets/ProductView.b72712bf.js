import{b4 as z,L as N,J as U,N as F,r as w,M as k,Z as I,O as c,ak as d,U as t,d as e,Q as l,F as g,an as f,Y as V,a8 as P,b5 as C,V as i,P as E,al as v,am as m,X as h,aq as L,ar as M}from"./index.3e2564e1.js";import{Q as R,a as y}from"./QBreadcrumbs.57097762.js";import{Q as T}from"./QChip.be7f2bf9.js";import{Q as J}from"./QSpace.b8cb55f0.js";import{Q as O,a as X}from"./QForm.af8af959.js";import{Q as Y}from"./QDialog.0c8c96c9.js";import"./use-key-composition.6ebc44bc.js";import"./use-prevent-scroll.d0a75d69.js";const Z={id:"productView"},j={class:"container"},A={class:"row q-mt-lg q-my-lg"},G={class:"col-12"},H={class:"gameInfo"},K={class:"row img_area bg-primary"},W={class:"col-8 q-mx-auto q-pt-lg"},ee={class:"slideshow"},se=["src"],ae={class:"thumbnails"},te=["src","onClick"],le={class:"row info_area"},oe={class:"q-pt-lg"},re={class:"info_name"},ie={class:"info_rules"},ne={class:"info_priceandbtn"},ce={class:"info_price"},ue={class:"info_btn"},de={class:"col-10"},me=t("div",{class:"text-h6"}," \u8CFC\u7269\u8ECA ",-1),we={__name:"ProductView",setup(_e){const b=z(),x=N(),B=U(),q=F(),p=w(0),S=s=>{p.value=s},_=w(!1),o=k({p_id:"",quantity:0,price:0,name:""}),D=s=>{_.value=!0,o.name=s.name,o.p_id=s._id,o.price=s.price,o.quantity=0,console.log(_.value)},Q={required(s){return!!s||"\u6B04\u4F4D\u5FC5\u586B"},number(s){return s>0||"\u6578\u91CF\u932F\u8AA4"}},$=async()=>{o.loading=!0,await q.editCart({_id:o.p_id,quantity:o.quantity,price:o.price,message:"\u52A0\u5165\u8CFC\u7269\u8ECA\u6210\u529F"}),_.value=!1},a=k({_id:"",name:"",images:[],category:[],gamer:0,age:0,rules:"",price:0,sell:!0,loading:!1});return(async()=>{try{console.log(b);const{data:s}=await I.get("/products/"+b.params.id);a._id=s.result._id,a.name=s.result.name,a.images=s.result.images,a.category=s.result.category,a.gamer=s.result.gamer,a.age=s.result.age,a.rules=s.result.rules,a.price=s.result.price,a.sell=s.result.sell,document.title="\u684C\u4E0B\u5427 | "+a.name}catch{B.notify({position:"top",message:"\u53D6\u5F97\u5546\u54C1\u5931\u6557",color:"negative",avatar:`https://source.boringavatars.com/beam/256/${q.account.value}?colors=#ffad08,#edd75a,#73b06f,#0c8f8f,#405059`}),x.go(-1)}})(),(s,u)=>(c(),d("div",Z,[t("div",j,[t("div",A,[t("div",G,[e(R,{class:"text-primary","active-color":"grey"},{separator:l(()=>[e(P,{size:"1.5em",name:"chevron_right",color:"primary"})]),default:l(()=>[e(y,{label:"\u9996\u9801",icon:"home",to:"/"}),e(y,{label:"\u4E8C\u624B\u5C08\u5340",icon:"mdi-bookshelf",to:"/shoppingMall"}),e(y,{label:a.name,icon:"mdi-cards"},null,8,["label"])]),_:1})])]),t("div",H,[t("div",K,[t("div",W,[t("div",ee,[(c(!0),d(g,null,f(a.images,(r,n)=>(c(),d("div",{key:n,class:C(["slide",{active:p.value===n}])},[t("img",{src:r},null,8,se)],2))),128))]),t("div",ae,[(c(!0),d(g,null,f(a.images,(r,n)=>(c(),d("img",{key:n,src:r,class:C({active:p.value===n}),onClick:pe=>S(n)},null,10,te))),128))])])]),t("div",le,[e(V,null,{default:l(()=>[e(i,null,{default:l(()=>[t("div",oe,[(c(!0),d(g,null,f(a.category,(r,n)=>(c(),E(T,{key:n,color:"primary",class:"text-white"},{default:l(()=>[v(m(r),1)]),_:2},1024))),128))])]),_:1}),e(i,null,{default:l(()=>[e(i,null,{default:l(()=>[t("div",re,m(a.name),1)]),_:1}),e(i,null,{default:l(()=>[t("div",ie,m(a.rules),1)]),_:1}),e(i,null,{default:l(()=>[t("div",ne,[t("div",ce," $"+m(a.price),1),t("div",ue,[e(h,{size:"lg",push:"",round:"",color:"secondary",icon:"mdi-cart-outline",onClick:u[0]||(u[0]=r=>D(a))})])])]),_:1})]),_:1})]),_:1}),t("div",de,[e(Y,{modelValue:_.value,"onUpdate:modelValue":u[2]||(u[2]=r=>_.value=r),persistent:""},{default:l(()=>[e(V,{class:"q-px-md"},{default:l(()=>[e(i,{class:"row items-center q-pb-md"},{default:l(()=>[me,e(J),L(e(h,{icon:"close",flat:"",round:"",dense:""},null,512),[[M]])]),_:1}),e(O,{class:"q-gutter-md",style:{width:"500px"},onSubmit:$},{default:l(()=>[e(i,null,{default:l(()=>[v(" \u54C1\u540D:"+m(o.name),1)]),_:1}),e(i,null,{default:l(()=>[v(" \u50F9\u9322:"+m(o.price),1)]),_:1}),e(i,null,{default:l(()=>[e(X,{modelValue:o.quantity,"onUpdate:modelValue":u[1]||(u[1]=r=>o.quantity=r),outlined:"",type:"number",label:"\u8ACB\u9078\u64C7\u5546\u54C1\u6578\u91CF *","lazy-rules":"",rules:[Q.required,Q.number]},null,8,["modelValue","rules"])]),_:1}),e(i,null,{default:l(()=>[e(h,{label:"\u78BA\u8A8D",type:"submit",color:"primary",loading:o.loading},null,8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])])])]))}};export{we as default};
